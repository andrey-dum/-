{"version":3,"sources":["util/ping.js","components/Ping.jsx","util/helper.js","App.js","reportWebVitals.js","index.js"],"names":["ping","url","multiplier","Promise","resolve","reject","start","Date","getTime","response","delta","img","Image","onload","onerror","src","Math","floor","random","toString","request_image","then","catch","setTimeout","Error","regex","RegExp","Ping","useState","input","setInput","className","value","onChange","e","target","placeholder","onClick","match","result","alert","error","console","log","disabled","getStats","arr","stats","setStats","length","time_0","performance","now","array","n","mean","reduce","a","b","standardDeviation","sqrt","map","x","pow","getStandardDeviation","med","ar1","el","half","sort","calcMedian","modes","frequency","maxFreq","i","k","push","getModes","lost","acc","curEl","curIndex","prev","id","getLost","duration","join","socket","WebSocket","App","data","setData","useEffect","close","style","padding","color","onopen","onclose","event","message","onmessage","JSON","parse","toFixed","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.14229abc.chunk.js","sourcesContent":["\r\n\r\nconst request_image = function(url) {\r\n    return new Promise(function(resolve, reject) {\r\n        var img = new Image();\r\n        img.onload = function() { resolve(img); };\r\n        img.onerror = function() { reject(url); };\r\n        img.src = url + '?random-no-cache=' + Math.floor((1 + Math.random()) * 0x10000).toString(16);\r\n        // console.log(img)\r\n    });\r\n};\r\n\r\nexport function ping(url, multiplier) {\r\n    return new Promise(function(resolve, reject) {\r\n        var start = (new Date()).getTime();\r\n        var response = function() {\r\n            var delta = ((new Date()).getTime() - start);\r\n            delta *= (multiplier || 1);\r\n            resolve(delta);\r\n        };\r\n        request_image(url).then(response).catch(response);\r\n\r\n        // Set a timeout for max-pings, 5s.\r\n        setTimeout(function() { reject(Error('Timeout')); }, 5000);\r\n    });\r\n};\r\n\r\n","import React, { useState } from 'react'\r\nimport { ping } from '../util/ping';\r\n\r\nlet expression = /(https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\\.[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9]+\\.[^\\s]{2,}|www\\.[a-zA-Z0-9]+\\.[^\\s]{2,})/gi;\r\nlet regex = new RegExp(expression);\r\n\r\nexport default function Ping() {\r\n  const [input, setInput] = useState('')\r\n\r\n  const changeHandler = (e) => {\r\n    setInput(e.target.value)\r\n  }\r\n\r\n  const getPing = () => {\r\n    if(input.match(regex)) {\r\n      ping(input).then(function(result) {\r\n        alert(result)\r\n      }).catch(function(error) {\r\n        console.log(error)\r\n      });\r\n    } else {\r\n      alert('Неверный адрес!')\r\n    }\r\n\t}\r\n\r\n  return (\r\n    <div className=\"ping\">\r\n      <input\r\n        value={input}\r\n        onChange={changeHandler}\r\n        placeholder=\"https://website.com\"\r\n      />\r\n      <button onClick={getPing} disabled={!input}>Ping</button>\r\n    </div>\r\n  )\r\n}\r\n","\r\nfunction getStandardDeviation (array) {\r\n  const n = array.length\r\n  const mean = array.reduce((a, b) => a + b.value, 0) / n\r\n  const standardDeviation = Math.sqrt(array.map(x => Math.pow(x.value - mean, 2)).reduce((a, b) => a + b) / n)\r\n  return [mean, standardDeviation]\r\n}\r\n\r\n\r\nfunction calcMedian(arr) {\r\n  const ar1 = arr.map(el => el.value)\r\n  const half = Math.floor(ar1.length / 2);\r\n  ar1.sort(function(a, b) { return a - b;});\r\n  if (ar1.length % 2) {\r\n    return ar1[half];\r\n  } else {\r\n    return (ar1[half] + ar1[half] + 1) / 2.0;\r\n  }\r\n}\r\n\r\nfunction getModes(arr) {\r\n  let frequency = {}; // array of frequency.\r\n  let maxFreq = 0; // holds the max frequency.\r\n  let modes = [];\r\n\r\n  let array = arr.map(el => el.value)\r\n\r\n  for (let i in array) {\r\n    frequency[array[i]] = (frequency[array[i]] || 0) + 1; // increment frequency.\r\n\r\n    if (frequency[array[i]] > maxFreq) { // is this frequency > max so far ?\r\n      maxFreq = frequency[array[i]]; // update max.\r\n    }\r\n  }\r\n\r\n  for (let k in frequency) {\r\n    if (frequency[k] === maxFreq) {\r\n      modes.push(k);\r\n    }\r\n  }\r\n\r\n  return modes;\r\n}\r\n\r\n\r\nfunction getLost (arr) {\r\n  const lost = arr.reduce((acc, curEl, curIndex) => {\r\n    let prev = curIndex  === arr.length - 1 ? curIndex : curIndex  + 1\r\n\r\n    let delta = arr[prev]?.id - curEl?.id - 1\r\n    return delta > 1 ? acc += delta : acc += 0\r\n  }, 0)\r\n\r\n  return lost;\r\n\r\n}\r\n\r\n\r\nexport const getStats = (arr, stats, setStats) => {\r\n  if(arr.length) {\r\n    const time_0 = performance.now();\r\n\r\n    const [mean, standardDeviation] = getStandardDeviation(arr)\r\n    const med = calcMedian(arr)\r\n    const modes = getModes(arr)\r\n    const lost = getLost(arr)\r\n\r\n    const duration = (performance.now() - time_0)\r\n    setStats([...stats, {mean: mean,  standardDeviation: standardDeviation, med: med, modes: modes.join(', '), lost: lost, duration: duration}])\r\n\r\n  } else {\r\n    alert('Данные для статистики отсутствуют!!!')\r\n  }\r\n\r\n}","import { useState, useEffect } from 'react'\nimport Ping from './components/Ping';\nimport { getStats } from './util/helper';\n\nlet socket = new WebSocket(\"wss://trade.trademux.net:8800/?password=1234\");\n\nfunction App() {\n\n\tconst [data, setData] = useState([])\n\tconst [stats, setStats] = useState([])\n\n\tuseEffect(() => {\n\n\t\treturn () => {\n\t\t\tsocket.close()\n\t\t}\n\t}, [])\n\n\n\tconst start = () => {\n\n\t\tsocket.onopen = () => {\n\t\t\tconsole.log(\"[open] Соединение установлено\");\n\t\t};\n\n\t\tsocket.onclose = (event) => {\n    \tconsole.log('onclose', event);\n\t\t\tsocket.close()\n  \t}\n\n\t\tsocket.onerror = function(error) {\n\t\t\tconsole.log(`[error] ${error.message}`);\n\t\t\tsocket.close()\n\t\t};\n\n    socket.onmessage = (event) => {\n\t\t\tconst response = JSON.parse(event.data);\n      setData(prev => [...prev, response]);\n    };\n\n  }\n\n\tconst handleClick = () => {\n\t\tgetStats(data, stats, setStats)\n  }\n\n\tconst clearStatsTable = () => {\n\t\tsetStats([])\n  }\n\n\n  return (\n    <div className=\"app\">\n\n\t\t\t<Ping />\n\n\t\t\t<hr />\n\n\t\t\t<div className=\"\">\n\t\t\t\t<div>\n\t\t\t\t\t<h1 style={{padding: 40, color: '#666'}}>Нажмите старт для получения данных!</h1>\n\t\t\t\t\t\t<button onClick={start}>Старт</button>\n\t\t\t\t\t\t<button onClick={handleClick} disabled={!data.length}>Статистика</button>\n\t\t\t\t\t\t<button onClick={clearStatsTable} disabled={!stats.length}>Очистить статистику</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{ stats.length ?\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Среднее значение</th>\n\t\t\t\t\t\t\t\t<th>Cтандартное отклонение</th>\n\t\t\t\t\t\t\t\t<th>Мода</th>\n\t\t\t\t\t\t\t\t<th>Медиана</th>\n\t\t\t\t\t\t\t\t<th>Потери</th>\n\t\t\t\t\t\t\t\t<th>Время</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{stats.map((el, i) => (\n\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t<td>{el.mean.toFixed(3)}</td>\n\t\t\t\t\t\t\t\t\t<td>{el.standardDeviation.toFixed(3)}</td>\n\t\t\t\t\t\t\t\t\t<td>{el.modes}</td>\n\t\t\t\t\t\t\t\t\t<td>{el.med}</td>\n\t\t\t\t\t\t\t\t\t<td>{el.lost}</td>\n\t\t\t\t\t\t\t\t\t<td>{el.duration.toFixed(3)}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t\t: <h1 style={{padding: 40, color: '#ddd'}}>Статистики пока нет!</h1> }\n\t\t\t\t</div>\n\t\t\t</div>\n  );\n}\n\nexport default App;\n\n\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}